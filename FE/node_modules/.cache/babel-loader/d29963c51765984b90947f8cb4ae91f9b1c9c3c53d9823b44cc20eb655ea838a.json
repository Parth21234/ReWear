{"ast":null,"code":"import React,{createContext,useContext,useState}from'react';import axios from'axios';import toast from'react-hot-toast';import{jsx as _jsx}from\"react/jsx-runtime\";const ItemContext=/*#__PURE__*/createContext();export const useItems=()=>{const context=useContext(ItemContext);if(!context){throw new Error('useItems must be used within an ItemProvider');}return context;};export const ItemProvider=_ref=>{let{children}=_ref;const[items,setItems]=useState([]);const[loading,setLoading]=useState(false);const[filters,setFilters]=useState({category:'',type:'',size:'',condition:''});const fetchItems=async()=>{setLoading(true);try{const response=await axios.get('/api/items');setItems(response.data.items);}catch(error){console.error('Error fetching items:',error);toast.error('Failed to fetch items');}finally{setLoading(false);}};const createItem=async itemData=>{try{const response=await axios.post('/api/items',itemData);setItems(prev=>[response.data.item,...prev]);toast.success('Item created successfully!');return{success:true};}catch(error){var _error$response,_error$response$data;const message=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to create item';toast.error(message);return{success:false,message};}};const updateItem=async(id,itemData)=>{try{const response=await axios.put(`/api/items/${id}`,itemData);setItems(prev=>prev.map(item=>item._id===id?response.data.item:item));toast.success('Item updated successfully!');return{success:true};}catch(error){var _error$response2,_error$response2$data;const message=((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Failed to update item';toast.error(message);return{success:false,message};}};const deleteItem=async id=>{try{await axios.delete(`/api/items/${id}`);setItems(prev=>prev.filter(item=>item._id!==id));toast.success('Item deleted successfully!');return{success:true};}catch(error){var _error$response3,_error$response3$data;const message=((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||'Failed to delete item';toast.error(message);return{success:false,message};}};const getItemById=async id=>{try{const response=await axios.get(`/api/items/${id}`);return response.data.item;}catch(error){console.error('Error fetching item:',error);toast.error('Failed to fetch item details');return null;}};const filteredItems=items.filter(item=>{if(filters.category&&item.category!==filters.category)return false;if(filters.type&&item.type!==filters.type)return false;if(filters.size&&item.size!==filters.size)return false;if(filters.condition&&item.condition!==filters.condition)return false;return true;});const value={items:filteredItems,loading,filters,setFilters,fetchItems,createItem,updateItem,deleteItem,getItemById};return/*#__PURE__*/_jsx(ItemContext.Provider,{value:value,children:children});};","map":{"version":3,"names":["React","createContext","useContext","useState","axios","toast","jsx","_jsx","ItemContext","useItems","context","Error","ItemProvider","_ref","children","items","setItems","loading","setLoading","filters","setFilters","category","type","size","condition","fetchItems","response","get","data","error","console","createItem","itemData","post","prev","item","success","_error$response","_error$response$data","message","updateItem","id","put","map","_id","_error$response2","_error$response2$data","deleteItem","delete","filter","_error$response3","_error$response3$data","getItemById","filteredItems","value","Provider"],"sources":["/Users/sanjayjaiswal/Desktop/store/ReWear/FE/src/contexts/ItemContext.js"],"sourcesContent":["import React, { createContext, useContext, useState } from 'react';\nimport axios from 'axios';\nimport toast from 'react-hot-toast';\n\nconst ItemContext = createContext();\n\nexport const useItems = () => {\n  const context = useContext(ItemContext);\n  if (!context) {\n    throw new Error('useItems must be used within an ItemProvider');\n  }\n  return context;\n};\n\nexport const ItemProvider = ({ children }) => {\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [filters, setFilters] = useState({\n    category: '',\n    type: '',\n    size: '',\n    condition: ''\n  });\n\n  const fetchItems = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.get('/api/items');\n      setItems(response.data.items);\n    } catch (error) {\n      console.error('Error fetching items:', error);\n      toast.error('Failed to fetch items');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const createItem = async (itemData) => {\n    try {\n      const response = await axios.post('/api/items', itemData);\n      setItems(prev => [response.data.item, ...prev]);\n      toast.success('Item created successfully!');\n      return { success: true };\n    } catch (error) {\n      const message = error.response?.data?.message || 'Failed to create item';\n      toast.error(message);\n      return { success: false, message };\n    }\n  };\n\n  const updateItem = async (id, itemData) => {\n    try {\n      const response = await axios.put(`/api/items/${id}`, itemData);\n      setItems(prev => prev.map(item => \n        item._id === id ? response.data.item : item\n      ));\n      toast.success('Item updated successfully!');\n      return { success: true };\n    } catch (error) {\n      const message = error.response?.data?.message || 'Failed to update item';\n      toast.error(message);\n      return { success: false, message };\n    }\n  };\n\n  const deleteItem = async (id) => {\n    try {\n      await axios.delete(`/api/items/${id}`);\n      setItems(prev => prev.filter(item => item._id !== id));\n      toast.success('Item deleted successfully!');\n      return { success: true };\n    } catch (error) {\n      const message = error.response?.data?.message || 'Failed to delete item';\n      toast.error(message);\n      return { success: false, message };\n    }\n  };\n\n  const getItemById = async (id) => {\n    try {\n      const response = await axios.get(`/api/items/${id}`);\n      return response.data.item;\n    } catch (error) {\n      console.error('Error fetching item:', error);\n      toast.error('Failed to fetch item details');\n      return null;\n    }\n  };\n\n  const filteredItems = items.filter(item => {\n    if (filters.category && item.category !== filters.category) return false;\n    if (filters.type && item.type !== filters.type) return false;\n    if (filters.size && item.size !== filters.size) return false;\n    if (filters.condition && item.condition !== filters.condition) return false;\n    return true;\n  });\n\n  const value = {\n    items: filteredItems,\n    loading,\n    filters,\n    setFilters,\n    fetchItems,\n    createItem,\n    updateItem,\n    deleteItem,\n    getItemById\n  };\n\n  return (\n    <ItemContext.Provider value={value}>\n      {children}\n    </ItemContext.Provider>\n  );\n}; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,QAAQ,KAAQ,OAAO,CAClE,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,KAAK,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEpC,KAAM,CAAAC,WAAW,cAAGP,aAAa,CAAC,CAAC,CAEnC,MAAO,MAAM,CAAAQ,QAAQ,CAAGA,CAAA,GAAM,CAC5B,KAAM,CAAAC,OAAO,CAAGR,UAAU,CAACM,WAAW,CAAC,CACvC,GAAI,CAACE,OAAO,CAAE,CACZ,KAAM,IAAI,CAAAC,KAAK,CAAC,8CAA8C,CAAC,CACjE,CACA,MAAO,CAAAD,OAAO,CAChB,CAAC,CAED,MAAO,MAAM,CAAAE,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACc,OAAO,CAAEC,UAAU,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACgB,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,CACrCkB,QAAQ,CAAE,EAAE,CACZC,IAAI,CAAE,EAAE,CACRC,IAAI,CAAE,EAAE,CACRC,SAAS,CAAE,EACb,CAAC,CAAC,CAEF,KAAM,CAAAC,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7BP,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAQ,QAAQ,CAAG,KAAM,CAAAtB,KAAK,CAACuB,GAAG,CAAC,YAAY,CAAC,CAC9CX,QAAQ,CAACU,QAAQ,CAACE,IAAI,CAACb,KAAK,CAAC,CAC/B,CAAE,MAAOc,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC7CxB,KAAK,CAACwB,KAAK,CAAC,uBAAuB,CAAC,CACtC,CAAC,OAAS,CACRX,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAa,UAAU,CAAG,KAAO,CAAAC,QAAQ,EAAK,CACrC,GAAI,CACF,KAAM,CAAAN,QAAQ,CAAG,KAAM,CAAAtB,KAAK,CAAC6B,IAAI,CAAC,YAAY,CAAED,QAAQ,CAAC,CACzDhB,QAAQ,CAACkB,IAAI,EAAI,CAACR,QAAQ,CAACE,IAAI,CAACO,IAAI,CAAE,GAAGD,IAAI,CAAC,CAAC,CAC/C7B,KAAK,CAAC+B,OAAO,CAAC,4BAA4B,CAAC,CAC3C,MAAO,CAAEA,OAAO,CAAE,IAAK,CAAC,CAC1B,CAAE,MAAOP,KAAK,CAAE,KAAAQ,eAAA,CAAAC,oBAAA,CACd,KAAM,CAAAC,OAAO,CAAG,EAAAF,eAAA,CAAAR,KAAK,CAACH,QAAQ,UAAAW,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgBT,IAAI,UAAAU,oBAAA,iBAApBA,oBAAA,CAAsBC,OAAO,GAAI,uBAAuB,CACxElC,KAAK,CAACwB,KAAK,CAACU,OAAO,CAAC,CACpB,MAAO,CAAEH,OAAO,CAAE,KAAK,CAAEG,OAAQ,CAAC,CACpC,CACF,CAAC,CAED,KAAM,CAAAC,UAAU,CAAG,KAAAA,CAAOC,EAAE,CAAET,QAAQ,GAAK,CACzC,GAAI,CACF,KAAM,CAAAN,QAAQ,CAAG,KAAM,CAAAtB,KAAK,CAACsC,GAAG,CAAC,cAAcD,EAAE,EAAE,CAAET,QAAQ,CAAC,CAC9DhB,QAAQ,CAACkB,IAAI,EAAIA,IAAI,CAACS,GAAG,CAACR,IAAI,EAC5BA,IAAI,CAACS,GAAG,GAAKH,EAAE,CAAGf,QAAQ,CAACE,IAAI,CAACO,IAAI,CAAGA,IACzC,CAAC,CAAC,CACF9B,KAAK,CAAC+B,OAAO,CAAC,4BAA4B,CAAC,CAC3C,MAAO,CAAEA,OAAO,CAAE,IAAK,CAAC,CAC1B,CAAE,MAAOP,KAAK,CAAE,KAAAgB,gBAAA,CAAAC,qBAAA,CACd,KAAM,CAAAP,OAAO,CAAG,EAAAM,gBAAA,CAAAhB,KAAK,CAACH,QAAQ,UAAAmB,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBjB,IAAI,UAAAkB,qBAAA,iBAApBA,qBAAA,CAAsBP,OAAO,GAAI,uBAAuB,CACxElC,KAAK,CAACwB,KAAK,CAACU,OAAO,CAAC,CACpB,MAAO,CAAEH,OAAO,CAAE,KAAK,CAAEG,OAAQ,CAAC,CACpC,CACF,CAAC,CAED,KAAM,CAAAQ,UAAU,CAAG,KAAO,CAAAN,EAAE,EAAK,CAC/B,GAAI,CACF,KAAM,CAAArC,KAAK,CAAC4C,MAAM,CAAC,cAAcP,EAAE,EAAE,CAAC,CACtCzB,QAAQ,CAACkB,IAAI,EAAIA,IAAI,CAACe,MAAM,CAACd,IAAI,EAAIA,IAAI,CAACS,GAAG,GAAKH,EAAE,CAAC,CAAC,CACtDpC,KAAK,CAAC+B,OAAO,CAAC,4BAA4B,CAAC,CAC3C,MAAO,CAAEA,OAAO,CAAE,IAAK,CAAC,CAC1B,CAAE,MAAOP,KAAK,CAAE,KAAAqB,gBAAA,CAAAC,qBAAA,CACd,KAAM,CAAAZ,OAAO,CAAG,EAAAW,gBAAA,CAAArB,KAAK,CAACH,QAAQ,UAAAwB,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBtB,IAAI,UAAAuB,qBAAA,iBAApBA,qBAAA,CAAsBZ,OAAO,GAAI,uBAAuB,CACxElC,KAAK,CAACwB,KAAK,CAACU,OAAO,CAAC,CACpB,MAAO,CAAEH,OAAO,CAAE,KAAK,CAAEG,OAAQ,CAAC,CACpC,CACF,CAAC,CAED,KAAM,CAAAa,WAAW,CAAG,KAAO,CAAAX,EAAE,EAAK,CAChC,GAAI,CACF,KAAM,CAAAf,QAAQ,CAAG,KAAM,CAAAtB,KAAK,CAACuB,GAAG,CAAC,cAAcc,EAAE,EAAE,CAAC,CACpD,MAAO,CAAAf,QAAQ,CAACE,IAAI,CAACO,IAAI,CAC3B,CAAE,MAAON,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC5CxB,KAAK,CAACwB,KAAK,CAAC,8BAA8B,CAAC,CAC3C,MAAO,KAAI,CACb,CACF,CAAC,CAED,KAAM,CAAAwB,aAAa,CAAGtC,KAAK,CAACkC,MAAM,CAACd,IAAI,EAAI,CACzC,GAAIhB,OAAO,CAACE,QAAQ,EAAIc,IAAI,CAACd,QAAQ,GAAKF,OAAO,CAACE,QAAQ,CAAE,MAAO,MAAK,CACxE,GAAIF,OAAO,CAACG,IAAI,EAAIa,IAAI,CAACb,IAAI,GAAKH,OAAO,CAACG,IAAI,CAAE,MAAO,MAAK,CAC5D,GAAIH,OAAO,CAACI,IAAI,EAAIY,IAAI,CAACZ,IAAI,GAAKJ,OAAO,CAACI,IAAI,CAAE,MAAO,MAAK,CAC5D,GAAIJ,OAAO,CAACK,SAAS,EAAIW,IAAI,CAACX,SAAS,GAAKL,OAAO,CAACK,SAAS,CAAE,MAAO,MAAK,CAC3E,MAAO,KAAI,CACb,CAAC,CAAC,CAEF,KAAM,CAAA8B,KAAK,CAAG,CACZvC,KAAK,CAAEsC,aAAa,CACpBpC,OAAO,CACPE,OAAO,CACPC,UAAU,CACVK,UAAU,CACVM,UAAU,CACVS,UAAU,CACVO,UAAU,CACVK,WACF,CAAC,CAED,mBACE7C,IAAA,CAACC,WAAW,CAAC+C,QAAQ,EAACD,KAAK,CAAEA,KAAM,CAAAxC,QAAA,CAChCA,QAAQ,CACW,CAAC,CAE3B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}